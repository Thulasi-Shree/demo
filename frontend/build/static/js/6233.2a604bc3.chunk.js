"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[6233],{4423:(e,s,a)=>{a.d(s,{Z:()=>t});a(7313);var r=a(6417);const t=e=>{let{message:s,type:a,onClose:t}=e;return(0,r.jsx)("div",{className:"modal",style:{display:"block"},children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsx)("span",{className:"close",onClick:t,children:"\xd7"}),(0,r.jsx)("p",{className:a,children:s})]})})}},5104:(e,s,a)=>{a(7313),a(259),a(1930),a(6417)},6233:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var r=a(6573),t=(a(5104),a(7313)),l=a(195),c=a(8467),d=(a(1930),a(6417));function i(){const e=JSON.parse(localStorage.getItem("cartItems"))||[],s=JSON.parse(localStorage.getItem("cartItemsTotal")),[a,r]=(0,t.useState)(e.reduce(((e,s)=>(e[s._id]=Number(s.quantity),e)),{}));return(0,t.useEffect)((()=>{r(e.reduce(((e,s)=>(e[s._id]=Number(s.quantity),e)),{}))}),[]),(0,d.jsx)(d.Fragment,{children:0===e.length?(0,d.jsx)("h4",{className:"mt-5",style:{color:"black",backgroundColor:"transparent",fontWeight:"500"},children:"Your Cart is Empty"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h5",{className:"mt-1",style:{color:"black",backgroundColor:"transparent",fontWeight:"500"},children:["Your Cart: ",(0,d.jsxs)("b",{children:[e.length," items"]})]}),(0,d.jsx)("div",{id:"MainCart",children:(0,d.jsxs)(l.Z,{className:"p-2 justify-content-between  mx-auto",style:{color:"black",backgroundColor:"transparent",fontWeight:"500"},children:[(0,d.jsx)("div",{className:"col-12 ",children:e.map((e=>(0,d.jsx)(t.Fragment,{children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-12",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-4",children:(0,d.jsx)("p",{style:{color:"black",backgroundColor:"transparent",fontWeight:"500"},children:e.name})}),(0,d.jsx)("div",{className:"col-4",children:(0,d.jsxs)("p",{id:"card_item_price",style:{color:"black",backgroundColor:"transparent",fontWeight:"500"},children:["Qty: ",e.quantity||1]})}),(0,d.jsx)("div",{className:"col-4 ",children:(0,d.jsxs)("p",{id:"card_item_price",style:{color:"black",backgroundColor:"transparent",fontWeight:"500"},children:["$",e.price*e.quantity]})})]})})})},e._id)))}),(0,d.jsx)("div",{id:"order_summary",className:"col-11  pt-2  ",children:(0,d.jsxs)("p",{style:{color:"black",backgroundColor:"transparent",fontSize:"13px",fontWeight:"500"},children:["Items total:"," ",(0,d.jsxs)("span",{className:"order-summary-values",style:{color:"black",backgroundColor:"transparent",fontWeight:"500"},children:["$",Number(s).toFixed(2)]})]})})]})})]})})}var n=a(4423);const o=()=>{const e=(0,c.s0)(),[s,a]=(0,t.useState)([]),[o,m]=(0,t.useState)({message:"",type:""}),[x,h]=(0,t.useState)(null),[p,u]=(0,t.useState)(!0),[N,g]=(0,t.useState)(!0),j=JSON.parse(localStorage.getItem("orderType")),b=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const a=localStorage.getItem(e);return a?JSON.parse(a):s}catch(a){return console.error("Error parsing JSON for key ".concat(e,":"),a),s}},y=b("shippingInfo",{}),f=b("user",{}),C=JSON.parse(localStorage.getItem("emailOrMobile")),v=JSON.parse(localStorage.getItem("orderNotes")),S=JSON.parse(localStorage.getItem("billingAddress")),T=JSON.parse(localStorage.getItem("deliveryAddress")),I=JSON.parse(localStorage.getItem("restaurantId")),k=JSON.parse(localStorage.getItem("selectedDate")),O=JSON.parse(localStorage.getItem("selectedTimeSlot")),w=JSON.parse(localStorage.getItem("distanceResponse")),P=JSON.parse(localStorage.getItem("isloggedIn")),[E,J]=(0,t.useState)(""),[Z,R]=(0,t.useState)(""),[_,A]=(0,t.useState)(""),F=p?0:(Number(Z)+Number(w*E)).toFixed(2),W=JSON.parse(localStorage.getItem("cartItemsTotal")),B=Number(W),D=(Number(_*B).toFixed(2),Number(Number(F)+Number(B)+Number(_)).toFixed(2));(0,t.useEffect)((()=>{(async()=>{try{const e=await r.Z.get("/api/restaurant",{params:{id:I}});h(e.data.restaurant.restaurantBranch),localStorage.setItem("restaurantBranch",JSON.stringify(x))}catch(e){m({message:"Error fetching restaurant details",type:"error"})}})(),(async()=>{try{const e=await r.Z.get("/api/admin/settings/get",{});J(e.data.data[0].deliveryChargePerKm),R(e.data.data[0].minDeliveryCharge),A(e.data.data[0].taxAmount)}catch(e){m({message:"Error fetching delivery & tax charges",type:"error"})}})(),g(!1),console.log(j)}),[I,y]);const M={userName:"".concat(f.name," ").concat(f.lastName),city:S.city,orderType:j,selectedTimeSlot:"".concat(O),state:S.state,streetAddress:S.streetAddress,postalCode:S.postalCode||S.postal_code,country:S.country};return(0,t.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("cartItems"))||[];a(e),u("Pickup"===j)}),[]),N?(0,d.jsx)("div",{children:"Loading..."}):(0,d.jsx)("div",{className:"ConfirmOrderMainImg bg-white",children:(0,d.jsx)("div",{className:"py-5",children:(0,d.jsx)(l.Z,{className:"row d-flex CardImg114 justify-content-between col-12 col-md-10 col-sm-12 col-xs-12 col-lg-8 mx-auto",id:"CardBackIMg1",children:(0,d.jsxs)("div",{className:" order-confirm ",style:{textAlign:"left"},children:[(0,d.jsx)("h4",{className:"mb-3 my-2",id:"CardText",children:"Order Info"}),(0,d.jsx)("div",{className:"container text-center",children:(0,d.jsxs)("div",{className:"row",children:[o.message&&(0,d.jsx)(n.Z,{message:o.message,type:o.type,onClose:()=>{m({message:"",type:""})}}),(0,d.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-6",children:(0,d.jsxs)(l.Z,{className:"p-2 borderUp",id:"CardText",children:[(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Name:"})," ",f.name," ",f.lastName]}),P&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Email:"})," ",f.email]}),(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Phone:"})," ",y.mobileNumber||f.phone]})]}),!P&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Email / Phone:"})," ",C]}),(0,d.jsx)("hr",{})]}),"Pickup"===j?(0,d.jsxs)("div",{id:"CardText",children:[(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Type:"})," Pickup"]}),(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Order date:"})," ",k]}),(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Pickup Time:"})," ",M.selectedTimeSlot]}),(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Restaurant:"})," ",x]}),(0,d.jsx)(l.Z,{className:"mt-3 p-2",id:"CardText",children:(0,d.jsxs)("p",{className:"mb-4",id:"CardText",children:[(0,d.jsx)("b",{id:"CardText",children:"Billing Address:"})," ",M.streetAddress,", ",M.city,","," ",M.state,", ",M.postalCode||S.postalCode,","," ",M.country]})})]}):(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Type:"})," Delivery"]}),(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Restaurant:"})," ",x]}),(0,d.jsxs)("p",{id:"CardText",children:[(0,d.jsx)("b",{children:"Delivery Time:"})," ",M.selectedTimeSlot||Date.now()]}),(0,d.jsx)(l.Z,{className:"mt-3 p-2",id:"CardText",children:(0,d.jsxs)("p",{className:"mb-4",id:"CardText",children:[(0,d.jsx)("b",{id:"CardText",children:"Billing Address:"})," ",M.streetAddress,", ",M.city,","," ",M.state,", ",M.postalCode||S.postal_code,","," ",M.country]})}),(0,d.jsx)(l.Z,{className:"mt-3 p-2",id:"CardText",children:(0,d.jsxs)("p",{className:"mb-4",id:"CardText",children:[(0,d.jsx)("b",{id:"CardText",children:"Delivery Address:"})," ",T.streetAddress,","," ",T.city,", ",T.state,","," ",T.postalCode||T.postal_code,","," ",T.country]})}),(0,d.jsx)(l.Z,{className:"mt-3 p-2",id:"CardText",children:(0,d.jsxs)("p",{className:"mb-4",id:"CardText",children:[(0,d.jsx)("b",{id:"CardText",children:"Order Instruction:"})," ",v]})})]})]})}),(0,d.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-6",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-lg-12 col-sm-12 col-xs-12 col-md-6 col-lg-6",children:(0,d.jsx)(i,{})})," ",(0,d.jsx)("div",{className:"col-lg-12 col-sm-12 col-md-6 col-lg-6",children:(0,d.jsxs)(l.Z,{className:" p-5 borderUp h-100 ",style:{color:"black",backgroundColor:"transparent",fontWeight:"500"},id:"order_summary",children:[(0,d.jsxs)("p",{id:"CardText",children:["Tax:"," ",(0,d.jsxs)("span",{className:"order-summary-values",id:"CardText",children:["$",_]})]}),"Delivery"===j?(0,d.jsxs)("p",{id:"CardText",children:["Delivery:"," ",(0,d.jsxs)("span",{className:"order-summary-values",children:["$",F]})]}):"",(0,d.jsxs)("p",{id:"CardText",children:["Total:"," ",(0,d.jsxs)("span",{className:"order-summary-values",id:"CardText",children:["$",D]})]})]})})]})}),(0,d.jsx)("div",{className:"d-flex justify-content-center",children:(0,d.jsx)("button",{type:"submit",id:"checkout_btn",className:"btn btn my-color my-3",onClick:()=>{const a={shippingInfo:M,cartItems:s,orderSummary:{shipping:Number(F),tax:Number(_),total:Number(D)}};localStorage.setItem("confirmOrder",JSON.stringify(a)),e("/payment")},children:"Proceed to Payment"})})]})})]})})})})}},195:(e,s,a)=>{a.d(s,{Z:()=>E});var r=a(6123),t=a.n(r),l=a(7313),c=a(8524),d=a(6417);const i=l.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:l="div",...i}=e;return r=(0,c.vE)(r,"card-body"),(0,d.jsx)(l,{ref:s,className:t()(a,r),...i})}));i.displayName="CardBody";const n=i,o=l.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:l="div",...i}=e;return r=(0,c.vE)(r,"card-footer"),(0,d.jsx)(l,{ref:s,className:t()(a,r),...i})}));o.displayName="CardFooter";const m=o;var x=a(5614);const h=l.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,as:i="div",...n}=e;const o=(0,c.vE)(a,"card-header"),m=(0,l.useMemo)((()=>({cardHeaderBsPrefix:o})),[o]);return(0,d.jsx)(x.Z.Provider,{value:m,children:(0,d.jsx)(i,{ref:s,...n,className:t()(r,o)})})}));h.displayName="CardHeader";const p=h,u=l.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,variant:l,as:i="img",...n}=e;const o=(0,c.vE)(a,"card-img");return(0,d.jsx)(i,{ref:s,className:t()(l?"".concat(o,"-").concat(l):o,r),...n})}));u.displayName="CardImg";const N=u,g=l.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:l="div",...i}=e;return r=(0,c.vE)(r,"card-img-overlay"),(0,d.jsx)(l,{ref:s,className:t()(a,r),...i})}));g.displayName="CardImgOverlay";const j=g,b=l.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:l="a",...i}=e;return r=(0,c.vE)(r,"card-link"),(0,d.jsx)(l,{ref:s,className:t()(a,r),...i})}));b.displayName="CardLink";const y=b;var f=a(6205);const C=(0,f.Z)("h6"),v=l.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:l=C,...i}=e;return r=(0,c.vE)(r,"card-subtitle"),(0,d.jsx)(l,{ref:s,className:t()(a,r),...i})}));v.displayName="CardSubtitle";const S=v,T=l.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:l="p",...i}=e;return r=(0,c.vE)(r,"card-text"),(0,d.jsx)(l,{ref:s,className:t()(a,r),...i})}));T.displayName="CardText";const I=T,k=(0,f.Z)("h5"),O=l.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:l=k,...i}=e;return r=(0,c.vE)(r,"card-title"),(0,d.jsx)(l,{ref:s,className:t()(a,r),...i})}));O.displayName="CardTitle";const w=O,P=l.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,bg:l,text:i,border:o,body:m=!1,children:x,as:h="div",...p}=e;const u=(0,c.vE)(a,"card");return(0,d.jsx)(h,{ref:s,...p,className:t()(r,u,l&&"bg-".concat(l),i&&"text-".concat(i),o&&"border-".concat(o)),children:m?(0,d.jsx)(n,{children:x}):x})}));P.displayName="Card";const E=Object.assign(P,{Img:N,Title:w,Subtitle:S,Body:n,Link:y,Text:I,Header:p,Footer:m,ImgOverlay:j})},1930:()=>{}}]);
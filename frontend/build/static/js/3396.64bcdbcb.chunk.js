(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[3396],{4423:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});a(7313);var l=a(6417);const t=e=>{let{message:s,type:a,onClose:t}=e;return(0,l.jsx)("div",{className:"modal",style:{display:"block"},children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsx)("span",{className:"close",onClick:t,children:"\xd7"}),(0,l.jsx)("p",{className:a,children:s})]})})}},2012:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var l=a(8467),t=a(2135),r=a(7313),n=a(5377),c=a.n(n),i=a(6573),o=(a(763),a(2984)),d=a.n(o),m=a(195),u=a(4423),h=a(6417);const x=()=>{const e=JSON.parse(localStorage.getItem("emailOrPhone")),s=(0,l.s0)(),[a,n]=(0,r.useState)(e),[o,x]=(0,r.useState)(""),[g,p]=(0,r.useState)({message:"",type:""}),[j,N]=(0,r.useState)(!1),b=(0,r.useRef)(new(c())({className:"text-danger"}));return(0,h.jsx)("div",{className:" bg-white py-4",children:(0,h.jsx)("div",{className:"signup-form-container mx-auto col-md-5 py-4 my-5",children:(0,h.jsx)(m.Z,{className:"bg-white p-3 Cardimg123",children:(0,h.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),b.current.allValid())try{N(!0);const e=d().AES.encrypt(o,"ghjdjdgdhddjjdhgdcdghww#hsh536").toString(),l=await i.Z.post("/api/login",{email:a,otp:e}),{token:t,user:r}=l.data;document.cookie="token=".concat(t,"; path=/;"),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("isloggedIn","true"),N(!1),r&&"user"!==r.role?(s("/admin/dashboard"),localStorage.removeItem("emailOrPhone")):s("/")}catch(l){g.message&&(u.Z,g.message,g.type),N(!1)}else b.current.showMessages()},children:(0,h.jsxs)("div",{className:"row mx-3 custom-table",id:"CardBackIMg1",children:[(0,h.jsxs)("div",{className:"col-11 mx-auto",children:[(0,h.jsx)("h1",{className:"text-center mt-3 signup-form-container",id:"CardText",children:"Login"}),(0,h.jsxs)("div",{className:"mt-4 text-black",children:["Do not have an account?",(0,h.jsx)(t.rU,{to:"/signup",className:"ms-2",id:"CardText",children:"Sign Up"})]}),(0,h.jsxs)("div",{className:"mb-3",style:{display:"none"},children:[(0,h.jsxs)("label",{htmlFor:"email",className:"form-label",id:"CardText",children:["Email address"," ",(0,h.jsxs)("span",{className:"text-danger",children:[" ",(0,h.jsx)("b",{children:"*"})]})]}),(0,h.jsx)("input",{style:{backgroundColor:"white",color:"black"},value:a,name:"email",onChange:e=>n(e.target.value),type:"email",required:!0,placeholder:"Field is required",className:"form-control"}),b.current.message("Email",a,"required")]})]}),(0,h.jsxs)("div",{className:"col-11 mx-auto",children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsxs)("label",{htmlFor:"otp",className:"form-label mt-2 text-black",children:["OTP"," ",(0,h.jsxs)("span",{className:"text-danger",children:[" ",(0,h.jsx)("b",{children:"*"})]})]}),(0,h.jsx)("input",{style:{backgroundColor:"white",color:"black"},value:o,name:"otp",onChange:e=>x(e.target.value),type:"otp",required:!0,placeholder:"Field is required",className:"form-control mt-2"}),b.current.message("otp",o,"required")]}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{type:"submit",disabled:j,className:"btn my-3 px-4 btn rounded w-100 my-3",children:j?"Logging in...":"Submit"})})]}),(0,h.jsxs)("div",{className:"row my-2 mx-auto",children:[(0,h.jsx)("div",{className:"col-6",children:(0,h.jsx)(t.rU,{className:"signup-form-container",to:"/login",id:"CardText",children:"Back to login"})}),(0,h.jsx)("div",{className:" col-6",children:(0,h.jsx)(t.rU,{to:"/",className:"signup-form-container",id:"CardText",children:"Continue as Guest"})})]})]})})})})})}},763:()=>{},2480:()=>{}}]);
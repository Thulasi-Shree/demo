"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[7511],{6220:(e,a,t)=>{t.d(a,{Z:()=>i});var r=t(7313),s=t(3298),c=t(465),d=t(259),n=t(1309),l=t(6417);const i=e=>{let{headers:a,data:t,onEdit:i,onUpdate:o,update:x,onDelete:h,onAddMenu:m,onViewDetails:u}=e;const[p,j]=(0,r.useState)("asc"),[b,g]=(0,r.useState)(null),C=e=>{let a;a=e===b&&"asc"===p?"desc":"asc",j(a),g(e)};return(0,l.jsx)("div",{children:(0,l.jsxs)(c.Z,{bordered:!0,responsive:!0,className:" mt-4 text-center w-100 Cardimg123",children:[(0,l.jsx)("thead",{className:"table-head bg-white",children:(0,l.jsxs)("tr",{children:[a.map((e=>(0,l.jsx)("th",{id:"CardText ",onClick:()=>C((e=>{switch(e){case"Menu Name":case"Name":return"name";case"Price":return"price";case"Customer":return"customer";case"Restaurant ID":return"_id";case"Restaurant Branch":return"restaurantBranch";default:return e.toLowerCase()}})(e)),children:e},e))),i&&(0,l.jsx)("th",{children:"Update"}),o&&(0,l.jsx)("th",{children:" Update"}),x&&(0,l.jsx)("th",{children:" View"}),u&&(0,l.jsx)("th",{children:" View"}),h&&(0,l.jsx)("th",{children:"Delete"}),m&&(0,l.jsx)("th",{children:"Add Menu"})]})}),(0,l.jsx)("tbody",{children:t.slice().sort(((e,a)=>{if("name"===b){const t="".concat(e.name," ").concat(e.lastName),r="".concat(a.name," ").concat(a.lastName);return"asc"===p?t.localeCompare(r):r.localeCompare(t)}return"price"===b?"asc"===p?e.price-a.price:a.price-e.price:"customer"===b?"asc"===p?e.shipping.name.localeCompare(a.shipping.name):a.shipping.name.localeCompare(e.shipping.name):"role"===b?"asc"===p?e.role.localeCompare(a.role):a.role.localeCompare(e.role):0})).map(((e,t)=>(0,l.jsxs)("tr",{className:"bg-white",style:{backgroundColor:"white"},children:[a.map((a=>"Sl No"===a?(0,l.jsx)("td",{children:(0,l.jsx)("p",{className:"text-black",id:"CardText",children:t+1})},a):"Restaurant Address"===a?(0,l.jsx)("td",{children:(0,l.jsxs)("p",{className:"text-black",id:"CardText",children:[e.address.line1,", ",e.address.line2,","," ",e.address.city,", ",e.address.state,","," ",e.address.postalCode,", ",e.address.country]})},a):"Order ID"===a?(0,l.jsx)("td",{children:(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.orderId})},a):"Carousal Image"===a?(0,l.jsx)("td",{children:(0,l.jsx)("img",{src:e.images[0].image,alt:"Carousel",style:{width:"75px",height:"auto"}})},a):"Carousal Text"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.text})]},a):"Branch ID"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.restaurantId})]},a):"Restaurant Branch ID"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.restaurantName})]},a):"Opening Hours"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.openingHours})]},a):"Restaurant Branch"===a?(0,l.jsx)("td",{onClick:()=>C("restaurantBranch"),children:(0,l.jsxs)("p",{className:"text-black",id:"CardText",children:[e.restaurantBranch," "]})},a):"User ID"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e._id})]},a):"Status"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.orderStatus})," "]},a):"Pickup/Delivery Time"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.selectedTimeSlot})]},a):"Order Date"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.createdAt})]},a):"Phone No"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.shipping.phone})]},a):"Email Address"===a?(0,l.jsxs)("td",{children:[" ",(0,l.jsx)("p",{className:"text-black",id:"CardText",children:e.shipping.email})]},a):"Category"===a?(0,l.jsxs)("td",{children:[(0,l.jsxs)("p",{className:"text-black",id:"CardText",children:[" ",(0,l.jsx)("b",{children:"MealType: "})," ",e.mealTypeCategory,","]}),(0,l.jsxs)("p",{className:"text-black",id:"CardText",children:[" ",(0,l.jsx)("b",{children:"Dietary Preference: "})," ",e.dietaryPreferenceCategory]})]},a):"Menu Name"===a?(0,l.jsx)("td",{onClick:()=>C("name"),children:(0,l.jsxs)("p",{className:"text-black",id:"CardText",children:[" ",e.name," "]})},a):"Name"===a?(0,l.jsx)("div",{style:{backgroundColor:"white",border:"none",display:"flex",justifyContent:"center"},children:(0,l.jsx)("td",{style:{border:"none",width:"100px"},onClick:()=>C("name"),children:(0,l.jsxs)("p",{id:"CardText",children:[" ",e.name," ",e.lastName]})},a)}):"Role"===a?(0,l.jsx)("td",{onClick:()=>C("role"),children:(0,l.jsxs)("p",{id:"CardText",children:[" ",e.role," "]})},a):"Customer"===a?(0,l.jsx)("td",{onClick:()=>C("customer"),children:(0,l.jsxs)("p",{id:"CardText",children:[" ",e.shipping.name," "]})},a):(0,l.jsx)("td",{children:(0,l.jsx)("p",{id:"CardText",children:e[a.toLowerCase()]||"N/A"})},a))),o&&(0,l.jsx)("td",{children:(0,l.jsx)(s.Z,{className:" btn my-3 px-4 btn border border-danger rounded bg-white text-black ",onClick:()=>o(e._id),children:(0,l.jsx)(d.G,{icon:n.Xcf})})}),x&&(0,l.jsx)("td",{children:(0,l.jsx)(s.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>x(e._id),children:"Update"})}),i&&(0,l.jsx)("td",{children:(0,l.jsx)(s.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>i(e._id),children:(0,l.jsx)(d.G,{icon:n.Mdf})})}),h&&(0,l.jsx)("td",{children:(0,l.jsx)(s.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>h(e._id),children:(0,l.jsx)(d.G,{icon:n.$aW})})}),u&&(0,l.jsx)("td",{children:(0,l.jsx)(s.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>u(e._id),children:(0,l.jsx)(d.G,{icon:n.Mdf})})}),m&&(0,l.jsx)("td",{children:(0,l.jsx)(s.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>m(e._id),children:"Add Menu"})})]},e._id)))})]})})}},7511:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var r=t(7313),s=t(8145),c=t.n(s),d=t(8467),n=t(6573),l=t(6220),i=t(259),o=t(1309),x=t(6417);const h=()=>{const e=(0,d.s0)(),a=JSON.parse(localStorage.getItem("user")),{restaurantId:t}=a,{role:s}=a,[h,m]=(0,r.useState)([]),[u,p]=(0,r.useState)(0),[j,b]=(0,r.useState)(0),[g,C]=(0,r.useState)([]),[k,y]=(0,r.useState)("all"),[N,v]=(0,r.useState)(""),[w,T]=(0,r.useState)(t||"all"),[D,f]=(0,r.useState)((()=>{const e=new Date,a=e.getMonth()+1,t=e.getDate();return"".concat(a,"/").concat(t)})),S=(e=>{const a=[],t=new Date;for(let r=0;r<e;r++){const e=new Date(t);e.setDate(t.getDate()+r);const s="".concat(e.getMonth()+1,"/").concat(e.getDate());a.push(s)}return a})(7),P=e=>{y(e)},I=async()=>{try{let e;e="all"===w?await n.Z.get("/api/admin/orders/active?restaurantId=".concat(w,"&selectedDate=").concat(D,"&page=").concat(u+1,"&pageSize=").concat(30)):await n.Z.get("/api/admin/order/active?restaurantId=".concat(w,"&selectedDate=").concat(D,"&page=").concat(u+1,"&pageSize=").concat(30));let a=Array.isArray(e.data)?e.data:e.data.orders;"all"!==k&&(a=a.filter((e=>e.orderType===k))),a.sort(((e,a)=>new Date("1970-01-01T".concat(e.selectedTimeSlot,":00"))-new Date("1970-01-01T".concat(a.selectedTimeSlot,":00")))),m(a||[]),b(Math.ceil(e.headers["x-total-count"]/30))}catch(e){console.error("Error fetching orders:",e)}};return(0,r.useEffect)((()=>{I()}),[w,k,D,u,30]),(0,r.useEffect)((()=>{(async()=>{try{const e=(await n.Z.get("/api/restaurant/get")).data.data;C(e)}catch(e){console.error("Error fetching time slots:",e.message)}})()}),[]),(0,x.jsx)("div",{className:"bg-white text-black",style:{minHeight:"58vh"},children:(0,x.jsxs)("div",{className:"col-11 mx-auto py-2",children:[(0,x.jsx)("h4",{className:"text-center",children:"Current orders"}),(0,x.jsxs)("div",{className:"row justify-content-end",children:[(0,x.jsxs)("div",{className:"col-lg-9 mx-auto",children:[(0,x.jsx)("h5",{className:"mt-3 text-black",children:"Select order type"}),(0,x.jsxs)("label",{children:[(0,x.jsx)("input",{id:"pickup",type:"radio",name:"orderType",value:"Pickup",checked:"Pickup"===k,onChange:()=>P("Pickup")})," ",(0,x.jsx)("span",{className:"text-black",children:"Pickup"})]})," ",(0,x.jsxs)("label",{children:[(0,x.jsx)("input",{id:"delivery",type:"radio",className:"ms-2 className='text-black'",name:"orderType",value:"Delivery",checked:"Delivery"===k,onChange:()=>P("Delivery")})," ",(0,x.jsx)("span",{children:"Delivery"})]})," ",(0,x.jsx)("button",{className:" my-3 px-4 border border-warning rounded ",onClick:()=>{y("all")},style:{backgroundColor:"white",border:"none"},children:(0,x.jsx)(i.G,{icon:o.$aW})}),(0,x.jsx)("div",{className:"date-buttons col-8  my-2",children:S.map((e=>(0,x.jsx)("button",{className:" my-3 mx-2 px-2 rounded",value:e,onClick:()=>(e=>{f(e)})(e),style:{backgroundColor:D===e?"orange":"white",border:D===e?"2px solid orange":"1px solid orange"},children:e},e)))})]}),(0,x.jsxs)("div",{className:"col-lg-3 col-7 mx-auto",children:["admin"!==s&&(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("h5",{className:"my-2",children:"Select Branch"}),(0,x.jsxs)("select",{className:"form-select form-select-sm",name:"status",value:w,onChange:e=>{T(e.target.value)},children:[(0,x.jsx)("option",{value:"all",children:"All"}),g&&g.map((e=>{return(0,x.jsxs)("option",{value:e.restaurantId,children:[e.restaurantBranch," -"," ",(a=e.address,"".concat(a.line1,", ").concat(a.city,", ").concat(a.state," - ").concat(a.postalCode,", ").concat(a.country))]},e._id);var a}))]})]}),(0,x.jsx)("h5",{className:"mt-2",children:"Update order"}),(0,x.jsxs)("select",{className:"form-control mb-2 text-black",value:N,required:!0,onChange:e=>v(e.target.value),children:[(0,x.jsx)("option",{value:"Order Placed",children:"Order Placed"}),(0,x.jsx)("option",{value:"Preparing",children:"Preparing"}),(0,x.jsx)("option",{value:"Out For Delivery",children:"Out for Delivery"}),(0,x.jsx)("option",{value:"Ready for Pickup",children:"Ready for Pickup"}),(0,x.jsx)("option",{value:"On the Way",children:"On the Way"}),(0,x.jsx)("option",{value:"Delivered",children:"Delivered"})]})]}),(0,x.jsxs)("div",{className:"col-lg-12 btn bg-white",children:[(0,x.jsx)(l.Z,{data:h,headers:["Sl No","Order ID","Customer","Restaurant Branch","Pickup/Delivery Time","Status"],update:async e=>{200===(await n.Z.put("/api/admin/order/".concat(e),{orderStatus:N})).status?I():console.error("Failed to update order status")},onEdit:a=>{e("/admin/order/".concat(a))}}),(0,x.jsx)(c(),{className:"pagination bg-white",id:"CardText",pageCount:j,pageRangeDisplayed:5,marginPagesDisplayed:2,onPageChange:e=>{p(e.selected)},containerClassName:"pagination",activeClassName:"active"})]})]})]})})}}}]);
"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[2687],{6220:(e,a,s)=>{s.d(a,{Z:()=>i});var t=s(7313),r=s(3298),n=s(465),d=s(259),l=s(1309),c=s(6417);const i=e=>{let{headers:a,data:s,onEdit:i,onUpdate:o,update:x,onDelete:h,onAddMenu:u,onViewDetails:m}=e;const[j,p]=(0,t.useState)("asc"),[b,C]=(0,t.useState)(null),g=e=>{let a;a=e===b&&"asc"===j?"desc":"asc",p(a),C(e)};return(0,c.jsx)("div",{children:(0,c.jsxs)(n.Z,{bordered:!0,responsive:!0,className:" mt-4 text-center w-100 Cardimg123",children:[(0,c.jsx)("thead",{className:"table-head bg-white",children:(0,c.jsxs)("tr",{children:[a.map((e=>(0,c.jsx)("th",{id:"CardText ",onClick:()=>g((e=>{switch(e){case"Menu Name":case"Name":return"name";case"Price":return"price";case"Customer":return"customer";case"Restaurant ID":return"_id";case"Restaurant Branch":return"restaurantBranch";default:return e.toLowerCase()}})(e)),children:e},e))),i&&(0,c.jsx)("th",{children:"Update"}),o&&(0,c.jsx)("th",{children:" Update"}),x&&(0,c.jsx)("th",{children:" View"}),m&&(0,c.jsx)("th",{children:" View"}),h&&(0,c.jsx)("th",{children:"Delete"}),u&&(0,c.jsx)("th",{children:"Add Menu"})]})}),(0,c.jsx)("tbody",{children:s.slice().sort(((e,a)=>{if("name"===b){const s="".concat(e.name," ").concat(e.lastName),t="".concat(a.name," ").concat(a.lastName);return"asc"===j?s.localeCompare(t):t.localeCompare(s)}return"price"===b?"asc"===j?e.price-a.price:a.price-e.price:"customer"===b?"asc"===j?e.shipping.name.localeCompare(a.shipping.name):a.shipping.name.localeCompare(e.shipping.name):"role"===b?"asc"===j?e.role.localeCompare(a.role):a.role.localeCompare(e.role):0})).map(((e,s)=>(0,c.jsxs)("tr",{className:"bg-white",style:{backgroundColor:"white"},children:[a.map((a=>"Sl No"===a?(0,c.jsx)("td",{children:(0,c.jsx)("p",{className:"text-black",id:"CardText",children:s+1})},a):"Restaurant Address"===a?(0,c.jsx)("td",{children:(0,c.jsxs)("p",{className:"text-black",id:"CardText",children:[e.address.line1,", ",e.address.line2,","," ",e.address.city,", ",e.address.state,","," ",e.address.postalCode,", ",e.address.country]})},a):"Order ID"===a?(0,c.jsx)("td",{children:(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.orderId})},a):"Carousal Image"===a?(0,c.jsx)("td",{children:(0,c.jsx)("img",{src:e.images[0].image,alt:"Carousel",style:{width:"75px",height:"auto"}})},a):"Carousal Text"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.text})]},a):"Branch ID"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.restaurantId})]},a):"Restaurant Branch ID"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.restaurantName})]},a):"Opening Hours"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.openingHours})]},a):"Restaurant Branch"===a?(0,c.jsx)("td",{onClick:()=>g("restaurantBranch"),children:(0,c.jsxs)("p",{className:"text-black",id:"CardText",children:[e.restaurantBranch," "]})},a):"User ID"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e._id})]},a):"Status"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.orderStatus})," "]},a):"Pickup/Delivery Time"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.selectedTimeSlot})]},a):"Order Date"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.createdAt})]},a):"Phone No"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.shipping.phone})]},a):"Email Address"===a?(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("p",{className:"text-black",id:"CardText",children:e.shipping.email})]},a):"Category"===a?(0,c.jsxs)("td",{children:[(0,c.jsxs)("p",{className:"text-black",id:"CardText",children:[" ",(0,c.jsx)("b",{children:"MealType: "})," ",e.mealTypeCategory,","]}),(0,c.jsxs)("p",{className:"text-black",id:"CardText",children:[" ",(0,c.jsx)("b",{children:"Dietary Preference: "})," ",e.dietaryPreferenceCategory]})]},a):"Menu Name"===a?(0,c.jsx)("td",{onClick:()=>g("name"),children:(0,c.jsxs)("p",{className:"text-black",id:"CardText",children:[" ",e.name," "]})},a):"Name"===a?(0,c.jsx)("div",{style:{backgroundColor:"white",border:"none",display:"flex",justifyContent:"center"},children:(0,c.jsx)("td",{style:{border:"none",width:"100px"},onClick:()=>g("name"),children:(0,c.jsxs)("p",{id:"CardText",children:[" ",e.name," ",e.lastName]})},a)}):"Role"===a?(0,c.jsx)("td",{onClick:()=>g("role"),children:(0,c.jsxs)("p",{id:"CardText",children:[" ",e.role," "]})},a):"Customer"===a?(0,c.jsx)("td",{onClick:()=>g("customer"),children:(0,c.jsxs)("p",{id:"CardText",children:[" ",e.shipping.name," "]})},a):(0,c.jsx)("td",{children:(0,c.jsx)("p",{id:"CardText",children:e[a.toLowerCase()]||"N/A"})},a))),o&&(0,c.jsx)("td",{children:(0,c.jsx)(r.Z,{className:" btn my-3 px-4 btn border border-danger rounded bg-white text-black ",onClick:()=>o(e._id),children:(0,c.jsx)(d.G,{icon:l.Xcf})})}),x&&(0,c.jsx)("td",{children:(0,c.jsx)(r.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>x(e._id),children:"Update"})}),i&&(0,c.jsx)("td",{children:(0,c.jsx)(r.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>i(e._id),children:(0,c.jsx)(d.G,{icon:l.Mdf})})}),h&&(0,c.jsx)("td",{children:(0,c.jsx)(r.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>h(e._id),children:(0,c.jsx)(d.G,{icon:l.$aW})})}),m&&(0,c.jsx)("td",{children:(0,c.jsx)(r.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>m(e._id),children:(0,c.jsx)(d.G,{icon:l.Mdf})})}),u&&(0,c.jsx)("td",{children:(0,c.jsx)(r.Z,{className:"btn my-3 px-4 btn border border-danger rounded bg-white text-black",onClick:()=>u(e._id),children:"Add Menu"})})]},e._id)))})]})})}},2687:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var t=s(7313),r=s(3298),n=s(1965),d=s(7533),l=s(259),c=s(1309),i=s(6573),o=s(7548),x=s(6220),h=(s(2214),s(6417));const u=()=>{const[e,a]=(0,t.useState)(!1),[s,u]=(0,t.useState)(null),[m,j]=(0,t.useState)(""),[p,b]=(0,t.useState)(1),[C,g]=(0,t.useState)(0),[N,k]=(0,t.useState)(0),[y,w]=(0,t.useState)(""),[T,Z]=(0,t.useState)(""),[f,v]=(0,t.useState)([]),[S,I]=(0,t.useState)(""),[B,A]=(0,t.useState)([]),[P,D]=(0,t.useState)("user"),E=async()=>{try{let e;e=S?await i.Z.get("/api/admin/users?&keyword=".concat(S,"&page=").concat(p)):await i.Z.get("/api/admin/users?&page=".concat(p)),k(e.data.resPerPage),g(e.data.count),v(e.data.Users)}catch(e){console.error("Error fetching users:",e)}},_=()=>{a(!1),u(null)},R=e=>{switch(e){case"superAdmin":return"Super Admin";case"admin":return"Admin";case"user":return"Customer";default:return e}},U=P?f.filter((e=>e.role===P)):f;return(0,t.useEffect)((()=>{E()}),[p,S]),(0,h.jsx)("div",{className:"bg-white text-white",style:{minHeight:"58vh"},children:(0,h.jsxs)("div",{className:"container-fluid",children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("h5",{className:"mt-3",id:"CardText",style:{fontWeight:"bold"},children:"USERS - Customer"}),(0,h.jsx)("div",{className:"col mt-4",style:{display:"flex",justifyContent:"space-between"},children:(0,h.jsx)("div",{style:{display:"flex"},children:(0,h.jsx)("div",{children:(0,h.jsx)("input",{type:"text",className:"form-control ",style:{display:"flex",color:"black",backgroundColor:"white"},placeholder:"Search user",value:S,onChange:e=>I(e.target.value)})})})}),(0,h.jsx)(x.Z,{headers:["Sl No","Name","Email","Phone","Role","Actions"],data:(B.length>0?B:U).map((e=>({...e,role:R(e.role),actions:(0,h.jsx)("div",{children:(0,h.jsx)(r.Z,{className:"btn my-1 px-4 btn border border-warning rounded bg-white text-black",onClick:()=>(async e=>{try{await i.Z.delete("/api/admin/user/".concat(e)),console.log("User with ID ".concat(e," deleted successfully")),E()}catch(a){console.error("Error deleting user:",a)}})(e._id),children:(0,h.jsx)(l.G,{icon:c.$aW})})})})))}),(0,h.jsx)(o.Z,{className:"pagination123",activePage:p,containerClassName:"pagination123",itemsCountPerPage:N,totalItemsCount:C,onChange:e=>{b(e),E()},nextPageText:"Next",firstPageText:"First",lastPageText:"Last",itemClass:"page-item123",linkClass:"page-link123"})]}),(0,h.jsxs)(n.Z,{show:e,onHide:_,children:[(0,h.jsx)(n.Z.Header,{closeButton:!0,children:(0,h.jsx)(n.Z.Title,{children:"Edit User"})}),(0,h.jsx)(n.Z.Body,{children:(0,h.jsxs)(d.Z,{children:[(0,h.jsxs)(d.Z.Group,{controlId:"role",children:[(0,h.jsx)(d.Z.Label,{children:"Role"}),(0,h.jsxs)(d.Z.Control,{as:"select",value:m,onChange:e=>j(e.target.value),children:[(0,h.jsx)("option",{value:"",children:"Select Role"}),(0,h.jsx)("option",{value:"user",children:"user"}),(0,h.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,h.jsxs)(d.Z.Group,{controlId:"assignBranch",children:[(0,h.jsx)(d.Z.Label,{children:"Assign Branch Name"}),(0,h.jsx)(d.Z.Control,{type:"text",placeholder:"Enter branch name",value:y,onChange:e=>w(e.target.value)})]}),(0,h.jsxs)(d.Z.Group,{controlId:"assignBranchId",children:[(0,h.jsx)(d.Z.Label,{children:"Assign Branch Id"}),(0,h.jsx)(d.Z.Control,{type:"text",placeholder:"Enter branch name",value:T,onChange:e=>Z(e.target.value)})]})]})}),(0,h.jsxs)(n.Z.Footer,{children:[(0,h.jsx)(r.Z,{className:"btn-custom",onClick:_,children:"Edit"}),(0,h.jsx)(r.Z,{className:"btn-custom",onClick:async()=>{try{await i.Z.put("/api/admin/user/".concat(s._id),{role:m,assignBranch:y,assignBranchId:T}),console.log("User updated successfully"),E(),j(""),w(""),Z(""),_()}catch(e){console.error("Error editing user:",e)}},children:"Delete"})]})]})]})})}},2214:()=>{}}]);
"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[629],{629:(e,a,r)=>{r.r(a),r.d(a,{default:()=>d});var s=r(7313),t=r(6573),l=r(195),n=r(4423),c=r(6417);const d=e=>{let{token:a}=e;const[r,d]=(0,s.useState)({minDeliveryCharge:"",taxAmount:"",deliveryChargePerKm:"",deliveryKm:"",restaurantId:"",restaurantBranch:""}),[i,m]=(0,s.useState)([]),[o,h]=(0,s.useState)({message:"",type:""}),[u,x]=(0,s.useState)([]),[v,g]=(0,s.useState)(!1),y=async()=>{try{const e=await t.Z.get("/api/admin/settings/get",{headers:{"x-auth-token":a}});if(e.data.data&&(m(e.data.data),e.data.data.length>0)){const{minDeliveryCharge:a,taxAmount:r,deliveryChargePerKm:s,deliveryKm:t,restaurantId:l,restaurantBranch:n}=e.data.data[0];d({restaurantId:l,restaurantBranch:n}),g(!0)}}catch(e){console.error("Fetch settings error",e)}};(0,s.useEffect)((()=>{(async()=>{try{const e=await t.Z.get("/api/restaurant/get");x(e.data.data)}catch(e){console.log("Error fetching restaurants")}})(),y()}),[a]);const f=e=>{const{name:a,value:r}=e.target;d((e=>({...e,[a]:r})))};return(0,c.jsx)("div",{className:"bg-white py-5 d-flex justify-content-center align-items-center text-black",children:(0,c.jsxs)(l.Z,{className:"p-4 col-xl-10 col-xs-12 col-sm-12 col-lg-12 col-md-12 Cardimg123",children:[(0,c.jsx)("h2",{children:"Tax & Delivery Charges"}),o.message&&(0,c.jsx)(n.Z,{message:o.message,type:o.type,onClose:()=>{h({message:"",type:""})}}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await t.Z.post("/api/admin/settings/update",{...r,isExisting:v},{headers:{"x-auth-token":a}});"Settings created successfully"!==e.data.message&&"Settings updated successfully"!==e.data.message||(h({message:e.data.message,type:"success"}),d({minDeliveryCharge:"",taxAmount:"",deliveryChargePerKm:"",deliveryKm:"",restaurantId:"",restaurantBranch:""})),y()}catch(s){h({message:"Error saving settings",type:"error"}),console.error("Error saving settings",s)}},children:[(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsxs)("select",{name:"restaurantId",value:r.restaurantId,onChange:e=>{const a=e.target.value,r=u.find((e=>e.restaurantId===parseInt(a)));d((e=>({...e,restaurantId:a,restaurantBranch:r?r.restaurantBranch:""})))},className:"form-select",children:[(0,c.jsx)("option",{value:"",children:"Select Restaurant"}),u.map((e=>(0,c.jsx)("option",{value:e.restaurantId,children:e.restaurantBranch},e._id)))]})}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{htmlFor:"minDeliveryCharge",className:"form-label",children:"Minimum Delivery Charges"}),(0,c.jsx)("input",{type:"number",className:"form-control",name:"minDeliveryCharge",value:r.minDeliveryCharge,onChange:e=>{e.target.value>=0&&f(e)},placeholder:"Min Delivery Charge",required:!0})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{htmlFor:"taxAmount",className:"form-label",children:"Tax Amount"}),(0,c.jsx)("input",{type:"number",className:"form-control",name:"taxAmount",value:r.taxAmount,onChange:e=>{e.target.value>=0&&f(e)},placeholder:"Tax Amount",required:!0})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{htmlFor:"deliveryChargePerKm",className:"form-label",children:"Delivery Charges per km"}),(0,c.jsx)("input",{type:"number",className:"form-control",name:"deliveryChargePerKm",value:r.deliveryChargePerKm,onChange:e=>{e.target.value>=0&&f(e)},placeholder:"Delivery Charge Per km",required:!0})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{htmlFor:"deliveryKm",className:"form-label",children:"Delivery km"}),(0,c.jsx)("input",{type:"number",className:"form-control",name:"deliveryKm",value:r.deliveryKm,onChange:e=>{e.target.value>=0&&f(e)},placeholder:"Delivery km"})]}),(0,c.jsx)("button",{className:"btn my-3 px-4 btn rounded w-100",type:"submit",children:"Save"})]}),(0,c.jsx)("h3",{className:"mt-4",children:"All data"}),(0,c.jsxs)("table",{className:"table mt-3",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Restaurant ID"}),(0,c.jsx)("th",{children:"Restaurant Branch"}),(0,c.jsx)("th",{children:"Min Delivery Charge"}),(0,c.jsx)("th",{children:"Tax Amount"}),(0,c.jsx)("th",{children:"Delivery Charge Per Km"}),(0,c.jsx)("th",{children:"Delivery Km"})]})}),(0,c.jsx)("tbody",{children:i.map(((e,a)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.restaurantId}),(0,c.jsx)("td",{children:e.restaurantBranch||"N/A"}),(0,c.jsx)("td",{children:e.minDeliveryCharge}),(0,c.jsx)("td",{children:e.taxAmount}),(0,c.jsx)("td",{children:e.deliveryChargePerKm}),(0,c.jsx)("td",{children:e.deliveryKm})]},a)))})]})]})})}},195:(e,a,r)=>{r.d(a,{Z:()=>R});var s=r(6123),t=r.n(s),l=r(7313),n=r(8524),c=r(6417);const d=l.forwardRef(((e,a)=>{let{className:r,bsPrefix:s,as:l="div",...d}=e;return s=(0,n.vE)(s,"card-body"),(0,c.jsx)(l,{ref:a,className:t()(r,s),...d})}));d.displayName="CardBody";const i=d,m=l.forwardRef(((e,a)=>{let{className:r,bsPrefix:s,as:l="div",...d}=e;return s=(0,n.vE)(s,"card-footer"),(0,c.jsx)(l,{ref:a,className:t()(r,s),...d})}));m.displayName="CardFooter";const o=m;var h=r(5614);const u=l.forwardRef(((e,a)=>{let{bsPrefix:r,className:s,as:d="div",...i}=e;const m=(0,n.vE)(r,"card-header"),o=(0,l.useMemo)((()=>({cardHeaderBsPrefix:m})),[m]);return(0,c.jsx)(h.Z.Provider,{value:o,children:(0,c.jsx)(d,{ref:a,...i,className:t()(s,m)})})}));u.displayName="CardHeader";const x=u,v=l.forwardRef(((e,a)=>{let{bsPrefix:r,className:s,variant:l,as:d="img",...i}=e;const m=(0,n.vE)(r,"card-img");return(0,c.jsx)(d,{ref:a,className:t()(l?"".concat(m,"-").concat(l):m,s),...i})}));v.displayName="CardImg";const g=v,y=l.forwardRef(((e,a)=>{let{className:r,bsPrefix:s,as:l="div",...d}=e;return s=(0,n.vE)(s,"card-img-overlay"),(0,c.jsx)(l,{ref:a,className:t()(r,s),...d})}));y.displayName="CardImgOverlay";const f=y,j=l.forwardRef(((e,a)=>{let{className:r,bsPrefix:s,as:l="a",...d}=e;return s=(0,n.vE)(s,"card-link"),(0,c.jsx)(l,{ref:a,className:t()(r,s),...d})}));j.displayName="CardLink";const N=j;var b=r(6205);const p=(0,b.Z)("h6"),C=l.forwardRef(((e,a)=>{let{className:r,bsPrefix:s,as:l=p,...d}=e;return s=(0,n.vE)(s,"card-subtitle"),(0,c.jsx)(l,{ref:a,className:t()(r,s),...d})}));C.displayName="CardSubtitle";const P=C,D=l.forwardRef(((e,a)=>{let{className:r,bsPrefix:s,as:l="p",...d}=e;return s=(0,n.vE)(s,"card-text"),(0,c.jsx)(l,{ref:a,className:t()(r,s),...d})}));D.displayName="CardText";const w=D,I=(0,b.Z)("h5"),K=l.forwardRef(((e,a)=>{let{className:r,bsPrefix:s,as:l=I,...d}=e;return s=(0,n.vE)(s,"card-title"),(0,c.jsx)(l,{ref:a,className:t()(r,s),...d})}));K.displayName="CardTitle";const k=K,E=l.forwardRef(((e,a)=>{let{bsPrefix:r,className:s,bg:l,text:d,border:m,body:o=!1,children:h,as:u="div",...x}=e;const v=(0,n.vE)(r,"card");return(0,c.jsx)(u,{ref:a,...x,className:t()(s,v,l&&"bg-".concat(l),d&&"text-".concat(d),m&&"border-".concat(m)),children:o?(0,c.jsx)(i,{children:h}):h})}));E.displayName="Card";const R=Object.assign(E,{Img:g,Title:k,Subtitle:P,Body:i,Link:N,Text:w,Header:x,Footer:o,ImgOverlay:f})}}]);
(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[1639],{4423:(e,s,a)=>{"use strict";a.d(s,{Z:()=>l});a(7313);var t=a(6417);const l=e=>{let{message:s,type:a,onClose:l}=e;return(0,t.jsx)("div",{className:"modal",style:{display:"block"},children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("span",{className:"close",onClick:l,children:"\xd7"}),(0,t.jsx)("p",{className:a,children:s})]})})}},9171:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(6573),l=a(7313),r=a(8467),n=a(2135),o=a(5377),c=a.n(o),d=(a(763),a(2984)),i=a.n(d),m=a(195),u=a(4423),g=a(6417);const h=()=>{const e=(0,r.s0)(),[s,a]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[h,p]=(0,l.useState)(!1),[x,j]=(0,l.useState)(null),[f,b]=(0,l.useState)({message:"",type:""}),y=(0,l.useRef)(new(c())({className:"text-danger"})),N="true"===localStorage.getItem("isloggedIn");return(0,l.useEffect)((()=>{if(x&&(b({message:x,type:"error"}),j(null)),N){const s=JSON.parse(localStorage.getItem("user"));e(s&&"user"!==s.role?"/admin/dashboard":"/")}}),[x,N,e]),(0,g.jsx)("div",{className:"container-fluid bg-white",children:(0,g.jsx)("div",{className:"signup-form-container col-lg-7 col-xl-6  mx-auto pt-5 bg-white",children:(0,g.jsxs)(m.Z,{className:"Cardimg123 bg-white",children:[f.message&&(0,g.jsx)(u.Z,{message:f.message,type:f.type,onClose:()=>{b({message:"",type:""})}}),(0,g.jsx)("form",{onSubmit:async l=>{if(l.preventDefault(),y.current.allValid()){const a=i().AES.encrypt(o,"ghjdjdgdhddjjdhgdcdghww#hsh536").toString();p(!0);try{const l=await t.Z.post("/api/login",{email:s,password:a});console.log(l);const{token:r,user:n}=l.data;document.cookie="token=".concat(r,"; path=/;"),localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("isloggedIn",!0),sessionStorage.setItem("isloggedIn",!0),e("user"!==n.role?"/admin/dashboard":"/")}catch(c){var r,n;j((null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Login failed")}finally{p(!1)}}else y.current.showMessages(),a(""),d("")},children:(0,g.jsxs)("div",{className:"row mx-auto p-3",children:[(0,g.jsxs)("div",{className:"col-md-12 ",children:[(0,g.jsx)("h1",{className:"text-center mt-3 fs-1 signup-form-container",children:"Login"}),(0,g.jsxs)("div",{className:"mb-3 address-container",children:[(0,g.jsxs)("p",{htmlFor:"email",className:"form-label mt-4 text-black",style:{fontWeight:"500"},children:["Email address",(0,g.jsxs)("span",{className:"text-danger",children:[" ",(0,g.jsx)("b",{children:"*"})]})]}),(0,g.jsx)("input",{value:s,style:{backgroundColor:"white",color:"black"},name:"email",onChange:e=>a(e.target.value),type:"email",required:!0,placeholder:"Email address is required",className:"form-control text-black"}),y.current.message("Email",s,"required")]})]}),(0,g.jsx)("div",{className:"col-md-12",children:(0,g.jsxs)("div",{className:"mb-3 address-container",children:[(0,g.jsxs)("p",{htmlFor:"password",className:"form-label text-black",id:"CardText",style:{fontWeight:"500"},children:["Password",(0,g.jsxs)("span",{className:"text-danger",children:[" ",(0,g.jsx)("b",{children:"*"})]})]}),(0,g.jsx)("input",{style:{backgroundColor:"white",color:"black"},value:o,name:"password",onChange:e=>d(e.target.value),type:"password",required:!0,placeholder:"Password is required",className:"form-control"}),y.current.message("password",o,"required")]})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"d-flex col-md-3  rounded mx-auto justify-content-center",children:(0,g.jsx)("button",{type:"submit",disabled:h,className:"btn my-3 px-4 btn rounded w-100 ",id:"Btn",children:"Submit"})}),(0,g.jsxs)("div",{className:"links-container row mb-4 ms-md-4 my-4",children:[(0,g.jsx)("p",{className:"col-md-4 col-12 signup-form-container",style:{fontSize:"17px"},children:(0,g.jsx)(n.rU,{to:"/",id:"CardText",style:{backgroundColor:"transparent"},children:"Go to HomePage"})}),(0,g.jsx)("p",{className:"col-md-4 col-12 signup-form-container",style:{fontSize:"17px"},children:(0,g.jsxs)(n.rU,{to:"/password/forgot",id:"CardText",style:{backgroundColor:"transparent"},children:[" ","Forgot password?"]})}),(0,g.jsx)("p",{className:"col-md-4 col-12 signup-form-container",style:{fontSize:"17px"},children:(0,g.jsx)(n.rU,{to:"/login/otp",id:"CardText",style:{backgroundColor:"transparent"},children:"Login with OTP"})})]}),(0,g.jsxs)("p",{className:"mt-4 text-black",style:{fontSize:"17px"},children:["Do not have account?",(0,g.jsx)(n.rU,{to:"/signup",className:"ms-2 signup-form-container",children:"Sign Up"})]})]})]})})]})})})}},763:()=>{},2480:()=>{}}]);
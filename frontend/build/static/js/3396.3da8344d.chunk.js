(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[3396],{2012:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>g});var t=s(8467),l=s(2135),r=s(7313),n=s(5377),i=s.n(n),c=s(6573),o=(s(763),s(2984)),d=s.n(o),m=s(195),u=s(4423),h=s(6417);const g=()=>{const e=JSON.parse(localStorage.getItem("emailOrPhone")),a=(0,t.s0)(),[s,n]=(0,r.useState)(e),[o,g]=(0,r.useState)(""),[x,p]=(0,r.useState)({message:"",type:""}),[j,b]=(0,r.useState)(!1),N=(0,r.useRef)(new(i())({className:"text-danger"}));return(0,h.jsx)("div",{className:" bg-white py-4",children:(0,h.jsx)("div",{className:"signup-form-container mx-auto col-md-5 py-4 my-5",children:(0,h.jsx)(m.Z,{className:"bg-white p-3 Cardimg123",children:(0,h.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),N.current.allValid())try{b(!0);const e=d().AES.encrypt(o,"ghjdjdgdhddjjdhgdcdghww#hsh536").toString(),t=await c.Z.post("/api/login",{email:s,otp:e}),{token:l,user:r}=t.data;document.cookie="token=".concat(l,"; path=/;"),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("isloggedIn","true"),b(!1),r&&"user"!==r.role?(a("/admin/dashboard"),localStorage.removeItem("emailOrPhone")):a("/")}catch(t){x.message&&(u.Z,x.message,x.type),b(!1)}else N.current.showMessages()},children:(0,h.jsxs)("div",{className:"row mx-3 custom-table",id:"CardBackIMg1",children:[(0,h.jsxs)("div",{className:"col-11 mx-auto",children:[(0,h.jsx)("h1",{className:"text-center mt-3 signup-form-container",id:"CardText",children:"Login"}),(0,h.jsxs)("div",{className:"mt-4 text-black",children:["Do not have an account?",(0,h.jsx)(l.rU,{to:"/signup",className:"ms-2",id:"CardText",children:"Sign Up"})]}),(0,h.jsxs)("div",{className:"mb-3",style:{display:"none"},children:[(0,h.jsxs)("label",{htmlFor:"email",className:"form-label",id:"CardText",children:["Email address"," ",(0,h.jsxs)("span",{className:"text-danger",children:[" ",(0,h.jsx)("b",{children:"*"})]})]}),(0,h.jsx)("input",{style:{backgroundColor:"white",color:"black"},value:s,name:"email",onChange:e=>n(e.target.value),type:"email",required:!0,placeholder:"Field is required",className:"form-control"}),N.current.message("Email",s,"required")]})]}),(0,h.jsxs)("div",{className:"col-11 mx-auto",children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsxs)("label",{htmlFor:"otp",className:"form-label mt-2 text-black",children:["OTP"," ",(0,h.jsxs)("span",{className:"text-danger",children:[" ",(0,h.jsx)("b",{children:"*"})]})]}),(0,h.jsx)("input",{style:{backgroundColor:"white",color:"black"},value:o,name:"otp",onChange:e=>g(e.target.value),type:"otp",required:!0,placeholder:"Field is required",className:"form-control mt-2"}),N.current.message("otp",o,"required")]}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{type:"submit",disabled:j,className:"btn my-3 px-4 btn rounded w-100 my-3",children:j?"Logging in...":"Submit"})})]}),(0,h.jsxs)("div",{className:"row my-2 mx-auto",children:[(0,h.jsx)("div",{className:"col-6",children:(0,h.jsx)(l.rU,{className:"signup-form-container",to:"/login",id:"CardText",children:"Back to login"})}),(0,h.jsx)("div",{className:" col-6",children:(0,h.jsx)(l.rU,{to:"/",className:"signup-form-container",id:"CardText",children:"Continue as Guest"})})]})]})})})})})}},763:()=>{},2480:()=>{}}]);